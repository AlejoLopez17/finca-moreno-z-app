{"ast":null,"code":"import _objectSpread from\"C:/Users/alezv/Desktop/App/React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{Plus,Edit,Search,Menu,X,Save,FileText,Users,Activity,Home,LogOut,UserPlus,LogIn,ChevronLeft,ChevronRight}from'lucide-react';// Importa los servicios de Firebase desde tu archivo de configuración\nimport{auth,db}from'./firebase';import{onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from\"firebase/auth\";import{collection,addDoc,onSnapshot,query,doc,updateDoc,deleteDoc,writeBatch,where,getDocs}from\"firebase/firestore\";// --- Pantalla de Autenticación (Login y Registro) ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthScreen=()=>{const[isLogin,setIsLogin]=useState(true);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleAuth=async e=>{e.preventDefault();setError('');try{if(isLogin){await signInWithEmailAndPassword(auth,email,password);}else{await createUserWithEmailAndPassword(auth,email,password);}}catch(err){setError(\"Error: \"+err.message.replace('Firebase: ',''));}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-20 w-20\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-emerald-800 mb-2\",children:isLogin?'Iniciar Sesión':'Crear Cuenta'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-stone-500 mb-8\",children:\"Bienvenido a Finca Moreno Z\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuth,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-4\",children:error}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\",children:[isLogin?/*#__PURE__*/_jsx(LogIn,{size:18}):/*#__PURE__*/_jsx(UserPlus,{size:18}),isLogin?'Ingresar':'Registrarse']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLogin(!isLogin),className:\"text-emerald-600 hover:underline\",children:isLogin?'¿No tienes una cuenta? Regístrate':'¿Ya tienes una cuenta? Inicia sesión'})})]})});};// --- Componentes de la UI (Reutilizados) ---\nconst Modal=_ref=>{let{children,onClose,title}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b border-stone-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800\",children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-stone-400 hover:text-stone-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:children})]})});};const Header=_ref2=>{let{title,onMenuClick}=_ref2;const handleLogout=()=>{signOut(auth);};return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onMenuClick,className:\"mr-4 p-2 rounded-full hover:bg-emerald-700\",children:/*#__PURE__*/_jsx(Menu,{size:24})}),/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-10 w-10 rounded-full bg-white p-1 object-contain\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold ml-4 tracking-wider\",children:title})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\",children:[/*#__PURE__*/_jsx(LogOut,{size:18}),\" Salir\"]})]});};// --- Lógica de Negocio ---\nconst calculateAgeInMonths=birthDate=>{if(!birthDate)return 0;const today=new Date();const birth=new Date(birthDate);let months=(today.getFullYear()-birth.getFullYear())*12;months-=birth.getMonth();months+=today.getMonth();return months<=0?0:months;};const determineCattleType=cattle=>{if(!cattle||!cattle.birthDate||!cattle.gender)return'N/A';const ageInMonths=calculateAgeInMonths(cattle.birthDate);if(ageInMonths<=12)return'Ternero/a';if(cattle.gender==='Hembra'){if(cattle.offspring&&cattle.offspring.length>0){const lastParto=new Date(Math.max(...cattle.offspring.map(o=>new Date(o.birthDate))));const monthsSinceParto=calculateAgeInMonths(lastParto);return monthsSinceParto<=12?'Vaca Parida':'Vaca Horra';}return ageInMonths<=24?'Novilla':'Vaca';}if(cattle.gender==='Macho'){if(ageInMonths<=24)return'Levante';if(cattle.isCastrated===true)return'Macho de Engorde';if(cattle.isCastrated===false)return'Toro';return'Macho Adulto';}return'Desconocido';};// --- Pantallas de la Aplicación ---\nconst HomeScreen=_ref3=>{let{navigate}=_ref3;const buttons=[{label:'Registro de Res',page:'registerCattle',icon:/*#__PURE__*/_jsx(Plus,{className:\"w-12 h-12\"})},{label:'Actualización de Res',page:'updateCattle',icon:/*#__PURE__*/_jsx(Edit,{className:\"w-12 h-12\"})},{label:'Consultar',page:'consult',icon:/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12\"})},{label:'Registro de Actividades',page:'activities',icon:/*#__PURE__*/_jsx(Activity,{className:\"w-12 h-12\"})},{label:'Registrar Propietarios',page:'registerOwner',icon:/*#__PURE__*/_jsx(Users,{className:\"w-12 h-12\"})}];return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-6 p-6\",children:buttons.map(btn=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(btn.page),className:\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\",children:[btn.icon,/*#__PURE__*/_jsx(\"span\",{className:\"mt-4 font-semibold text-lg\",children:btn.label})]},btn.page))});};const RegisterOwnerScreen=_ref4=>{let{onCancel,owners,user}=_ref4;const[name,setName]=useState('');const handleSave=async()=>{if(name.trim()&&user){try{const ownersCollectionRef=collection(db,'users',user.uid,'owners');await addDoc(ownersCollectionRef,{name:name.trim()});alert('Propietario guardado con éxito!');onCancel();}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Registrar Nuevo Propietario\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Nombre y Apellidos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\" Guardar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800 mb-4\",children:\"Propietarios Registrados\"}),owners.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-stone-200\",children:owners.map(owner=>/*#__PURE__*/_jsx(\"li\",{className:\"py-3 text-stone-600\",children:owner.name},owner.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-stone-500\",children:\"No hay propietarios registrados.\"})]})]});};const RegisterCattleScreen=_ref5=>{let{onCancel,owners,cattleData,user}=_ref5;const[form,setForm]=useState({id:'',birthDate:'',gender:'Hembra',weight:'',parentsId:'',lastVaccines:'',ownerId:owners.length>0?owners[0].id:''});const[useAutoId,setUseAutoId]=useState(true);const cattleType=useMemo(()=>determineCattleType(form),[form.birthDate,form.gender]);const handleChange=e=>{const{name,value}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const generateAutoId=()=>{const allIds=cattleData.map(c=>c.customId.replace(/^[VM]-/,'')).filter(id=>id.startsWith('FMZ-'));const lastIdNum=allIds.length>0?Math.max(...allIds.map(id=>parseInt(id.split('-')[1]))):0;return\"FMZ-\".concat(String(lastIdNum+1).padStart(3,'0'));};const handleSave=async()=>{const finalId=useAutoId?generateAutoId():form.id.trim();if(!finalId||!form.birthDate||!form.weight||!form.ownerId){alert(\"Por favor, completa todos los campos obligatorios.\");return;}if(!useAutoId&&cattleData.some(c=>c.customId.toUpperCase()===finalId.toUpperCase())){alert(\"El código de identificación manual ya existe.\");return;}if(user){try{const cattleCollectionRef=collection(db,'users',user.uid,'cattle');await addDoc(cattleCollectionRef,_objectSpread(_objectSpread({},form),{},{customId:finalId,status:'Viva',offspring:[],weight:parseFloat(form.weight),createdAt:new Date()}));alert('Res guardada con éxito!');onCancel();}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Registrar Nueva Res\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"C\\xF3digo de Identificaci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"id\",value:useAutoId?generateAutoId():form.id,onChange:handleChange,disabled:useAutoId,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg disabled:bg-stone-100\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setUseAutoId(!useAutoId),className:\"px-4 py-3 rounded-lg font-semibold transition-colors \".concat(useAutoId?'bg-emerald-600 text-white':'bg-stone-200'),children:\"Auto\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Fecha de Nacimiento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"birthDate\",value:form.birthDate,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"G\\xE9nero\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"gender\",value:form.gender,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Hembra\",children:\"Hembra\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Macho\",children:\"Macho\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Peso (Kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"weight\",value:form.weight,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"C\\xF3digo de los Padres\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"parentsId\",value:form.parentsId,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Tipo de Cabeza de Ganado\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:cattleType,disabled:true,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-stone-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"\\xDAltimas Vacunas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastVaccines\",value:form.lastVaccines,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Propietario\"}),/*#__PURE__*/_jsx(\"select\",{name:\"ownerId\",value:form.ownerId,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\",disabled:owners.length===0,children:owners.length>0?owners.map(o=>/*#__PURE__*/_jsx(\"option\",{value:o.id,children:o.name},o.id)):/*#__PURE__*/_jsx(\"option\",{children:\"Registre un propietario primero\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\" Guardar\"]})]})]})});};const UpdateCattleScreen=_ref6=>{let{onCancel,cattleData,owners,user}=_ref6;const[searchTerm,setSearchTerm]=useState('');const[selectedCattle,setSelectedCattle]=useState(null);const[form,setForm]=useState(null);const[modal,setModal]=useState({isOpen:false,type:null,data:null});const handleSearch=async()=>{const q=query(collection(db,'users',user.uid,'cattle'),where(\"customId\",\"==\",searchTerm.trim().toUpperCase()));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){const doc=querySnapshot.docs[0];const foundCattle=_objectSpread(_objectSpread({},doc.data()),{},{docId:doc.id});setSelectedCattle(foundCattle);setForm(foundCattle);}else{alert(\"Código inexistente, valide que este correcto\");setSelectedCattle(null);setForm(null);}};const handleUpdate=async()=>{const cattleDocRef=doc(db,'users',user.uid,'cattle',selectedCattle.docId);await updateDoc(cattleDocRef,form);alert(\"Información actualizada con éxito\");onCancel();};const handleStatusChange=async(newStatus,date)=>{const batch=writeBatch(db);const oldDocRef=doc(db,'users',user.uid,'cattle',selectedCattle.docId);const newDocRef=doc(collection(db,'users',user.uid,'deceasedSoldCattle'));const newCustomId=\"\".concat(newStatus==='Vendida'?'V':'M',\"-\").concat(selectedCattle.customId);const updatedData=_objectSpread(_objectSpread(_objectSpread({},selectedCattle),form),{},{status:newStatus,statusChangeDate:date,customId:newCustomId,originalDocId:selectedCattle.docId});delete updatedData.docId;// No guardar el ID de Firestore en el nuevo documento\nbatch.set(newDocRef,updatedData);batch.delete(oldDocRef);await batch.commit();alert(\"El estado de la res ha sido actualizado a \".concat(newStatus,\".\"));onCancel();};// ... UI similar a la versión anterior, pero con lógica de Firestore ...\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Actualizar Res\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Buscar por c\\xF3digo...\",className:\"w-full px-4 py-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\",children:/*#__PURE__*/_jsx(Search,{size:18})})]})]}),selectedCattle&&form&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Editando: \",form.customId]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white\",children:\"Actualizar\"})]})]})]});};const ConsultScreen=_ref7=>{let{cattleData,owners,deceasedSoldData}=_ref7;// UI similar a la versión anterior, los datos ya vienen por props\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Consultar Registros\"})})});};const RegisterActivitiesScreen=_ref8=>{let{onCancel,activities,user}=_ref8;const[form,setForm]=useState({date:'',status:'En curso',observations:''});const handleSave=async()=>{if(form.date&&form.observations&&user){try{const activitiesCollectionRef=collection(db,'users',user.uid,'activities');await addDoc(activitiesCollectionRef,_objectSpread(_objectSpread({},form),{},{createdAt:new Date()}));alert('Actividad guardada con éxito!');setForm({date:'',status:'En curso',observations:''});}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Agregar Actividad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200\",children:\"Volver\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white\",children:\"Guardar\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800 my-4\",children:\"Actividades Recientes\"})]})});};// --- Componente Principal de la App ---\nexport default function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState('home');const[owners,setOwners]=useState([]);const[cattleData,setCattleData]=useState([]);const[deceasedSoldData,setDeceasedSoldData]=useState([]);const[activities,setActivities]=useState([]);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setLoading(false);if(currentUser){setCurrentPage('home');}});return()=>unsubscribe();},[]);useEffect(()=>{if(user){const collections=['owners','cattle','deceasedSoldCattle','activities'];const setters=[setOwners,setCattleData,setDeceasedSoldData,setActivities];const unsubscribes=collections.map((col,index)=>{const q=query(collection(db,'users',user.uid,col));return onSnapshot(q,querySnapshot=>{const data=[];querySnapshot.forEach(doc=>{data.push(_objectSpread(_objectSpread({},doc.data()),{},{docId:doc.id}));});setters[index](data);});});return()=>unsubscribes.forEach(unsub=>unsub());}else{setOwners([]);setCattleData([]);setDeceasedSoldData([]);setActivities([]);}},[user]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando...\"});}if(!user){return/*#__PURE__*/_jsx(AuthScreen,{});}const renderPage=()=>{switch(currentPage){case'registerOwner':return/*#__PURE__*/_jsx(RegisterOwnerScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,user:user});case'registerCattle':return/*#__PURE__*/_jsx(RegisterCattleScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,cattleData:cattleData,user:user});case'updateCattle':return/*#__PURE__*/_jsx(UpdateCattleScreen,{onCancel:()=>setCurrentPage('home'),cattleData:cattleData,owners:owners,user:user});case'consult':return/*#__PURE__*/_jsx(ConsultScreen,{cattleData:cattleData,owners:owners,deceasedSoldData:deceasedSoldData});case'activities':return/*#__PURE__*/_jsx(RegisterActivitiesScreen,{onCancel:()=>setCurrentPage('home'),activities:activities,user:user});case'home':default:return/*#__PURE__*/_jsx(HomeScreen,{navigate:setCurrentPage});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-stone-100 min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(Header,{title:\"Finca Moreno Z\",onMenuClick:()=>{}}),/*#__PURE__*/_jsx(\"main\",{children:renderPage()})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","Plus","Edit","Search","Menu","X","Save","FileText","Users","Activity","Home","LogOut","UserPlus","LogIn","ChevronLeft","ChevronRight","auth","db","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","collection","addDoc","onSnapshot","query","doc","updateDoc","deleteDoc","writeBatch","where","getDocs","jsx","_jsx","jsxs","_jsxs","AuthScreen","isLogin","setIsLogin","email","setEmail","password","setPassword","error","setError","handleAuth","e","preventDefault","err","message","replace","className","children","src","alt","onSubmit","type","value","onChange","target","required","size","onClick","Modal","_ref","onClose","title","Header","_ref2","onMenuClick","handleLogout","calculateAgeInMonths","birthDate","today","Date","birth","months","getFullYear","getMonth","determineCattleType","cattle","gender","ageInMonths","offspring","length","lastParto","Math","max","map","o","monthsSinceParto","isCastrated","HomeScreen","_ref3","navigate","buttons","label","page","icon","btn","RegisterOwnerScreen","_ref4","onCancel","owners","user","name","setName","handleSave","trim","ownersCollectionRef","uid","alert","console","owner","id","RegisterCattleScreen","_ref5","cattleData","form","setForm","weight","parentsId","lastVaccines","ownerId","useAutoId","setUseAutoId","cattleType","handleChange","prev","_objectSpread","generateAutoId","allIds","c","customId","filter","startsWith","lastIdNum","parseInt","split","concat","String","padStart","finalId","some","toUpperCase","cattleCollectionRef","status","parseFloat","createdAt","disabled","UpdateCattleScreen","_ref6","searchTerm","setSearchTerm","selectedCattle","setSelectedCattle","modal","setModal","isOpen","data","handleSearch","q","querySnapshot","empty","docs","foundCattle","docId","handleUpdate","cattleDocRef","handleStatusChange","newStatus","date","batch","oldDocRef","newDocRef","newCustomId","updatedData","statusChangeDate","originalDocId","set","delete","commit","placeholder","ConsultScreen","_ref7","deceasedSoldData","RegisterActivitiesScreen","_ref8","activities","observations","activitiesCollectionRef","App","setUser","loading","setLoading","currentPage","setCurrentPage","setOwners","setCattleData","setDeceasedSoldData","setActivities","unsubscribe","currentUser","collections","setters","unsubscribes","col","index","forEach","push","unsub","renderPage"],"sources":["C:/Users/alezv/Desktop/App/React/src/App.js"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { Plus, Edit, Search, Menu, X, Save, FileText, Users, Activity, Home, LogOut, UserPlus, LogIn, ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\n// Importa los servicios de Firebase desde tu archivo de configuración\r\nimport { auth, db } from './firebase'; \r\nimport { \r\n  onAuthStateChanged, \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut \r\n} from \"firebase/auth\";\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  onSnapshot, \r\n  query, \r\n  doc, \r\n  updateDoc,\r\n  deleteDoc,\r\n  writeBatch,\r\n  where,\r\n  getDocs\r\n} from \"firebase/firestore\";\r\n\r\n\r\n// --- Pantalla de Autenticación (Login y Registro) ---\r\nconst AuthScreen = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleAuth = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      if (isLogin) {\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n      } else {\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error: \" + err.message.replace('Firebase: ', ''));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\">\r\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\">\r\n        <div className=\"flex justify-center mb-6\">\r\n          <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-20 w-20\" />\r\n        </div>\r\n        <h2 className=\"text-3xl font-bold text-center text-emerald-800 mb-2\">\r\n          {isLogin ? 'Iniciar Sesión' : 'Crear Cuenta'}\r\n        </h2>\r\n        <p className=\"text-center text-stone-500 mb-8\">Bienvenido a Finca Moreno Z</p>\r\n        \r\n        <form onSubmit={handleAuth}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Correo Electrónico</label>\r\n            <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" required />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Contraseña</label>\r\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" required />\r\n          </div>\r\n          {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n          <button type=\"submit\" className=\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\">\r\n            {isLogin ? <LogIn size={18} /> : <UserPlus size={18} />}\r\n            {isLogin ? 'Ingresar' : 'Registrarse'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <button onClick={() => setIsLogin(!isLogin)} className=\"text-emerald-600 hover:underline\">\r\n            {isLogin ? '¿No tienes una cuenta? Regístrate' : '¿Ya tienes una cuenta? Inicia sesión'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// --- Componentes de la UI (Reutilizados) ---\r\nconst Modal = ({ children, onClose, title }) => (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\">\r\n            <div className=\"flex justify-between items-center p-4 border-b border-stone-200\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800\">{title}</h3>\r\n                <button onClick={onClose} className=\"text-stone-400 hover:text-stone-600\"><X size={24} /></button>\r\n            </div>\r\n            <div className=\"p-6\">{children}</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst Header = ({ title, onMenuClick }) => {\r\n  const handleLogout = () => { signOut(auth); };\r\n  return (\r\n    <header className=\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\">\r\n        <div className=\"flex items-center\">\r\n            <button onClick={onMenuClick} className=\"mr-4 p-2 rounded-full hover:bg-emerald-700\"><Menu size={24} /></button>\r\n            <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-10 w-10 rounded-full bg-white p-1 object-contain\" />\r\n            <h1 className=\"text-2xl font-bold ml-4 tracking-wider\">{title}</h1>\r\n        </div>\r\n        <button onClick={handleLogout} className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\">\r\n          <LogOut size={18} /> Salir\r\n        </button>\r\n    </header>\r\n  );\r\n};\r\n\r\n// --- Lógica de Negocio ---\r\nconst calculateAgeInMonths = (birthDate) => {\r\n    if (!birthDate) return 0;\r\n    const today = new Date();\r\n    const birth = new Date(birthDate);\r\n    let months = (today.getFullYear() - birth.getFullYear()) * 12;\r\n    months -= birth.getMonth();\r\n    months += today.getMonth();\r\n    return months <= 0 ? 0 : months;\r\n};\r\n\r\nconst determineCattleType = (cattle) => {\r\n    if (!cattle || !cattle.birthDate || !cattle.gender) return 'N/A';\r\n    const ageInMonths = calculateAgeInMonths(cattle.birthDate);\r\n    if (ageInMonths <= 12) return 'Ternero/a';\r\n    if (cattle.gender === 'Hembra') {\r\n        if (cattle.offspring && cattle.offspring.length > 0) {\r\n            const lastParto = new Date(Math.max(...cattle.offspring.map(o => new Date(o.birthDate))));\r\n            const monthsSinceParto = calculateAgeInMonths(lastParto);\r\n            return monthsSinceParto <= 12 ? 'Vaca Parida' : 'Vaca Horra';\r\n        }\r\n        return ageInMonths <= 24 ? 'Novilla' : 'Vaca';\r\n    }\r\n    if (cattle.gender === 'Macho') {\r\n        if (ageInMonths <= 24) return 'Levante';\r\n        if (cattle.isCastrated === true) return 'Macho de Engorde';\r\n        if (cattle.isCastrated === false) return 'Toro';\r\n        return 'Macho Adulto';\r\n    }\r\n    return 'Desconocido';\r\n};\r\n\r\n\r\n// --- Pantallas de la Aplicación ---\r\nconst HomeScreen = ({ navigate }) => {\r\n    const buttons = [\r\n        { label: 'Registro de Res', page: 'registerCattle', icon: <Plus className=\"w-12 h-12\" /> },\r\n        { label: 'Actualización de Res', page: 'updateCattle', icon: <Edit className=\"w-12 h-12\" /> },\r\n        { label: 'Consultar', page: 'consult', icon: <FileText className=\"w-12 h-12\" /> },\r\n        { label: 'Registro de Actividades', page: 'activities', icon: <Activity className=\"w-12 h-12\" /> },\r\n        { label: 'Registrar Propietarios', page: 'registerOwner', icon: <Users className=\"w-12 h-12\" /> },\r\n    ];\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-6 p-6\">\r\n            {buttons.map((btn) => (\r\n                <button key={btn.page} onClick={() => navigate(btn.page)} className=\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\">\r\n                    {btn.icon}\r\n                    <span className=\"mt-4 font-semibold text-lg\">{btn.label}</span>\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterOwnerScreen = ({ onCancel, owners, user }) => {\r\n    const [name, setName] = useState('');\r\n    const handleSave = async () => {\r\n        if (name.trim() && user) {\r\n            try {\r\n                const ownersCollectionRef = collection(db, 'users', user.uid, 'owners');\r\n                await addDoc(ownersCollectionRef, { name: name.trim() });\r\n                alert('Propietario guardado con éxito!');\r\n                onCancel();\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Registrar Nuevo Propietario</h2>\r\n                <div className=\"mb-6\"><label className=\"block text-stone-700 font-medium mb-2\">Nombre y Apellidos</label><input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div>\r\n                <div className=\"flex justify-end gap-4\"><button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\">Cancelar</button><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\"><Save size={18}/> Guardar</button></div>\r\n            </div>\r\n            <div className=\"mt-8 bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800 mb-4\">Propietarios Registrados</h3>\r\n                {owners.length > 0 ? (<ul className=\"divide-y divide-stone-200\">{owners.map(owner => <li key={owner.id} className=\"py-3 text-stone-600\">{owner.name}</li>)}</ul>) : (<p className=\"text-stone-500\">No hay propietarios registrados.</p>)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterCattleScreen = ({ onCancel, owners, cattleData, user }) => {\r\n    const [form, setForm] = useState({ id: '', birthDate: '', gender: 'Hembra', weight: '', parentsId: '', lastVaccines: '', ownerId: owners.length > 0 ? owners[0].id : '' });\r\n    const [useAutoId, setUseAutoId] = useState(true);\r\n    const cattleType = useMemo(() => determineCattleType(form), [form.birthDate, form.gender]);\r\n    const handleChange = (e) => { const { name, value } = e.target; setForm(prev => ({ ...prev, [name]: value })); };\r\n    const generateAutoId = () => {\r\n        const allIds = cattleData.map(c => c.customId.replace(/^[VM]-/, '')).filter(id => id.startsWith('FMZ-'));\r\n        const lastIdNum = allIds.length > 0 ? Math.max(...allIds.map(id => parseInt(id.split('-')[1]))) : 0;\r\n        return `FMZ-${String(lastIdNum + 1).padStart(3, '0')}`;\r\n    };\r\n    const handleSave = async () => {\r\n        const finalId = useAutoId ? generateAutoId() : form.id.trim();\r\n        if (!finalId || !form.birthDate || !form.weight || !form.ownerId) { alert(\"Por favor, completa todos los campos obligatorios.\"); return; }\r\n        if (!useAutoId && cattleData.some(c => c.customId.toUpperCase() === finalId.toUpperCase())) { alert(\"El código de identificación manual ya existe.\"); return; }\r\n        if (user) {\r\n            try {\r\n                const cattleCollectionRef = collection(db, 'users', user.uid, 'cattle');\r\n                await addDoc(cattleCollectionRef, { ...form, customId: finalId, status: 'Viva', offspring: [], weight: parseFloat(form.weight), createdAt: new Date() });\r\n                alert('Res guardada con éxito!');\r\n                onCancel();\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\"><div className=\"bg-white p-8 rounded-2xl shadow-lg\"><h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Registrar Nueva Res</h2><div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\"><div><label className=\"block text-stone-700 font-medium mb-2\">Código de Identificación</label><div className=\"flex items-center gap-2\"><input type=\"text\" name=\"id\" value={useAutoId ? generateAutoId() : form.id} onChange={handleChange} disabled={useAutoId} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg disabled:bg-stone-100\" /><button onClick={() => setUseAutoId(!useAutoId)} className={`px-4 py-3 rounded-lg font-semibold transition-colors ${useAutoId ? 'bg-emerald-600 text-white' : 'bg-stone-200'}`}>Auto</button></div></div><div><label className=\"block text-stone-700 font-medium mb-2\">Fecha de Nacimiento</label><input type=\"date\" name=\"birthDate\" value={form.birthDate} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Género</label><select name=\"gender\" value={form.gender} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\"><option value=\"Hembra\">Hembra</option><option value=\"Macho\">Macho</option></select></div><div><label className=\"block text-stone-700 font-medium mb-2\">Peso (Kg)</label><input type=\"number\" name=\"weight\" value={form.weight} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Código de los Padres</label><input type=\"text\" name=\"parentsId\" value={form.parentsId} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Tipo de Cabeza de Ganado</label><input type=\"text\" value={cattleType} disabled className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-stone-100\" /></div><div className=\"md:col-span-2\"><label className=\"block text-stone-700 font-medium mb-2\">Últimas Vacunas</label><input type=\"text\" name=\"lastVaccines\" value={form.lastVaccines} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div className=\"md:col-span-2\"><label className=\"block text-stone-700 font-medium mb-2\">Propietario</label><select name=\"ownerId\" value={form.ownerId} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\" disabled={owners.length === 0}>{owners.length > 0 ? owners.map(o => <option key={o.id} value={o.id}>{o.name}</option>) : <option>Registre un propietario primero</option>}</select></div></div><div className=\"flex justify-end gap-4 mt-8\"><button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\">Cancelar</button><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\"><Save size={18}/> Guardar</button></div></div></div>\r\n    );\r\n};\r\n\r\nconst UpdateCattleScreen = ({ onCancel, cattleData, owners, user }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedCattle, setSelectedCattle] = useState(null);\r\n    const [form, setForm] = useState(null);\r\n    const [modal, setModal] = useState({ isOpen: false, type: null, data: null });\r\n    const handleSearch = async () => {\r\n        const q = query(collection(db, 'users', user.uid, 'cattle'), where(\"customId\", \"==\", searchTerm.trim().toUpperCase()));\r\n        const querySnapshot = await getDocs(q);\r\n        if (!querySnapshot.empty) {\r\n            const doc = querySnapshot.docs[0];\r\n            const foundCattle = { ...doc.data(), docId: doc.id };\r\n            setSelectedCattle(foundCattle);\r\n            setForm(foundCattle);\r\n        } else { alert(\"Código inexistente, valide que este correcto\"); setSelectedCattle(null); setForm(null); }\r\n    };\r\n    const handleUpdate = async () => {\r\n        const cattleDocRef = doc(db, 'users', user.uid, 'cattle', selectedCattle.docId);\r\n        await updateDoc(cattleDocRef, form);\r\n        alert(\"Información actualizada con éxito\");\r\n        onCancel();\r\n    };\r\n    const handleStatusChange = async (newStatus, date) => {\r\n        const batch = writeBatch(db);\r\n        const oldDocRef = doc(db, 'users', user.uid, 'cattle', selectedCattle.docId);\r\n        const newDocRef = doc(collection(db, 'users', user.uid, 'deceasedSoldCattle'));\r\n        const newCustomId = `${newStatus === 'Vendida' ? 'V' : 'M'}-${selectedCattle.customId}`;\r\n        const updatedData = { ...selectedCattle, ...form, status: newStatus, statusChangeDate: date, customId: newCustomId, originalDocId: selectedCattle.docId };\r\n        delete updatedData.docId; // No guardar el ID de Firestore en el nuevo documento\r\n        batch.set(newDocRef, updatedData);\r\n        batch.delete(oldDocRef);\r\n        await batch.commit();\r\n        alert(`El estado de la res ha sido actualizado a ${newStatus}.`);\r\n        onCancel();\r\n    };\r\n    // ... UI similar a la versión anterior, pero con lógica de Firestore ...\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Actualizar Res</h2>\r\n                <div className=\"flex gap-2\">\r\n                    <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"Buscar por código...\" className=\"w-full px-4 py-3 border rounded-lg\" />\r\n                    <button onClick={handleSearch} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\"><Search size={18}/></button>\r\n                </div>\r\n            </div>\r\n            {selectedCattle && form && (\r\n                <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n                    {/* Formulario de actualización aquí, usando `form` y `setForm` */}\r\n                    <p>Editando: {form.customId}</p>\r\n                    {/* Lógica de botones para llamar a handleUpdate o handleStatusChange */}\r\n                    <div className=\"flex justify-end gap-4 mt-8\">\r\n                        <button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200\">Cancelar</button>\r\n                        <button onClick={handleUpdate} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white\">Actualizar</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ConsultScreen = ({ cattleData, owners, deceasedSoldData }) => {\r\n    // UI similar a la versión anterior, los datos ya vienen por props\r\n    return <div className=\"p-6\"><div className=\"bg-white p-8 rounded-2xl shadow-lg\"><h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Consultar Registros</h2>{/* UI de consulta aquí */}</div></div>;\r\n};\r\n\r\nconst RegisterActivitiesScreen = ({ onCancel, activities, user }) => {\r\n    const [form, setForm] = useState({ date: '', status: 'En curso', observations: '' });\r\n    const handleSave = async () => {\r\n        if (form.date && form.observations && user) {\r\n            try {\r\n                const activitiesCollectionRef = collection(db, 'users', user.uid, 'activities');\r\n                await addDoc(activitiesCollectionRef, { ...form, createdAt: new Date() });\r\n                alert('Actividad guardada con éxito!');\r\n                setForm({ date: '', status: 'En curso', observations: '' });\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\"><div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n            <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Agregar Actividad</h2>\r\n            {/* Formulario de actividad aquí */}\r\n            <div className=\"flex justify-end gap-4 mt-8\"><button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200\">Volver</button><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white\">Guardar</button></div>\r\n            <h3 className=\"text-xl font-bold text-emerald-800 my-4\">Actividades Recientes</h3>\r\n            {/* Lista de actividades aquí */}\r\n        </div></div>\r\n    );\r\n};\r\n\r\n\r\n// --- Componente Principal de la App ---\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState('home');\r\n    const [owners, setOwners] = useState([]);\r\n    const [cattleData, setCattleData] = useState([]);\r\n    const [deceasedSoldData, setDeceasedSoldData] = useState([]);\r\n    const [activities, setActivities] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n            setUser(currentUser); setLoading(false);\r\n            if(currentUser) { setCurrentPage('home'); }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            const collections = ['owners', 'cattle', 'deceasedSoldCattle', 'activities'];\r\n            const setters = [setOwners, setCattleData, setDeceasedSoldData, setActivities];\r\n            const unsubscribes = collections.map((col, index) => {\r\n                const q = query(collection(db, 'users', user.uid, col));\r\n                return onSnapshot(q, (querySnapshot) => {\r\n                    const data = [];\r\n                    querySnapshot.forEach((doc) => { data.push({ ...doc.data(), docId: doc.id }); });\r\n                    setters[index](data);\r\n                });\r\n            });\r\n            return () => unsubscribes.forEach(unsub => unsub());\r\n        } else {\r\n            setOwners([]); setCattleData([]); setDeceasedSoldData([]); setActivities([]);\r\n        }\r\n    }, [user]);\r\n\r\n    if (loading) { return <div>Cargando...</div>; }\r\n    if (!user) { return <AuthScreen />; }\r\n\r\n    const renderPage = () => {\r\n        switch (currentPage) {\r\n            case 'registerOwner': return <RegisterOwnerScreen onCancel={() => setCurrentPage('home')} owners={owners} user={user} />;\r\n            case 'registerCattle': return <RegisterCattleScreen onCancel={() => setCurrentPage('home')} owners={owners} cattleData={cattleData} user={user} />;\r\n            case 'updateCattle': return <UpdateCattleScreen onCancel={() => setCurrentPage('home')} cattleData={cattleData} owners={owners} user={user} />;\r\n            case 'consult': return <ConsultScreen cattleData={cattleData} owners={owners} deceasedSoldData={deceasedSoldData} />;\r\n            case 'activities': return <RegisterActivitiesScreen onCancel={() => setCurrentPage('home')} activities={activities} user={user} />;\r\n            case 'home': default: return <HomeScreen navigate={setCurrentPage} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-stone-100 min-h-screen font-sans\">\r\n            <Header title=\"Finca Moreno Z\" onMenuClick={() => {}} />\r\n            <main>{renderPage()}</main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}