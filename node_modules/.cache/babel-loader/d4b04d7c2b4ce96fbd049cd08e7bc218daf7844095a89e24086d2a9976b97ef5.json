{"ast":null,"code":"import _objectSpread from\"C:/Users/alezv/Desktop/App/React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{Plus,Edit,Search,Menu,X,Save,FileText,Users,Activity,Home,LogOut,UserPlus,LogIn}from'lucide-react';// Importa los servicios de Firebase desde tu archivo de configuración\nimport{auth,db}from'./firebase';import{onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from\"firebase/auth\";import{collection,addDoc,onSnapshot,query,doc,updateDoc,deleteDoc}from\"firebase/firestore\";// --- Pantalla de Autenticación (Login y Registro) ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthScreen=()=>{const[isLogin,setIsLogin]=useState(true);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleAuth=async e=>{e.preventDefault();setError('');try{if(isLogin){await signInWithEmailAndPassword(auth,email,password);}else{await createUserWithEmailAndPassword(auth,email,password);}}catch(err){setError(err.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-20 w-20\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-emerald-800 mb-2\",children:isLogin?'Iniciar Sesión':'Crear Cuenta'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-stone-500 mb-8\",children:\"Bienvenido a Finca Moreno Z\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuth,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-4\",children:error}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\",children:[isLogin?/*#__PURE__*/_jsx(LogIn,{size:18}):/*#__PURE__*/_jsx(UserPlus,{size:18}),isLogin?'Ingresar':'Registrarse']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLogin(!isLogin),className:\"text-emerald-600 hover:underline\",children:isLogin?'¿No tienes una cuenta? Regístrate':'¿Ya tienes una cuenta? Inicia sesión'})})]})});};// --- Componentes de la UI (Reutilizados y adaptados) ---\nconst Modal=_ref=>{let{children,onClose,title}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b border-stone-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800\",children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-stone-400 hover:text-stone-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:children})]})});};const Header=_ref2=>{let{title,onMenuClick}=_ref2;const handleLogout=()=>{signOut(auth);};return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onMenuClick,className:\"mr-4 p-2 rounded-full hover:bg-emerald-700\",children:/*#__PURE__*/_jsx(Menu,{size:24})}),/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-10 w-10 rounded-full bg-white p-1 object-contain\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold ml-4 tracking-wider\",children:title})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\",children:[/*#__PURE__*/_jsx(LogOut,{size:18}),\"Salir\"]})]});};// --- Pantallas de la Aplicación (Adaptadas para Firebase) ---\n// NOTA: La lógica de las pantallas (RegisterOwner, RegisterCattle, etc.)\n// necesitaría ser reescrita para usar las funciones de Firestore (`addDoc`, `onSnapshot`, etc.)\n// en lugar de manejar el estado localmente.\n// Por simplicidad, aquí se muestra la estructura principal y la pantalla de Propietarios adaptada.\nconst RegisterOwnerScreen=_ref3=>{let{onCancel,owners,user}=_ref3;const[name,setName]=useState('');const handleSave=async()=>{if(name.trim()&&user){try{// Crea una referencia a la subcolección 'owners' del usuario actual\nconst ownersCollectionRef=collection(db,'users',user.uid,'owners');await addDoc(ownersCollectionRef,{name:name.trim()});alert('Propietario guardado con éxito!');onCancel();// Vuelve a la pantalla principal\n}catch(error){console.error(\"Error al guardar propietario: \",error);alert(\"Hubo un error al guardar. Inténtalo de nuevo.\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Registrar Nuevo Propietario\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Nombre y Apellidos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\" Guardar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800 mb-4\",children:\"Propietarios Registrados\"}),owners.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-stone-200\",children:owners.map(owner=>/*#__PURE__*/_jsx(\"li\",{className:\"py-3 text-stone-600\",children:owner.name},owner.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-stone-500\",children:\"No hay propietarios registrados.\"})]})]});};const HomeScreen=_ref4=>{let{navigate}=_ref4;const buttons=[{label:'Registro de Res',page:'registerCattle',icon:/*#__PURE__*/_jsx(Plus,{className:\"w-12 h-12\"})},{label:'Actualización de Res',page:'updateCattle',icon:/*#__PURE__*/_jsx(Edit,{className:\"w-12 h-12\"})},{label:'Consultar',page:'consult',icon:/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12\"})},{label:'Registro de Actividades',page:'activities',icon:/*#__PURE__*/_jsx(Activity,{className:\"w-12 h-12\"})},{label:'Registrar Propietarios',page:'registerOwner',icon:/*#__PURE__*/_jsx(Users,{className:\"w-12 h-12\"})}];return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-6 p-6\",children:buttons.map(btn=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(btn.page),className:\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\",children:[btn.icon,/*#__PURE__*/_jsx(\"span\",{className:\"mt-4 font-semibold text-lg\",children:btn.label})]},btn.page))});};// --- Componente Principal de la App ---\nexport default function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState('home');// Estados para los datos de Firestore\nconst[owners,setOwners]=useState([]);// const [cattleData, setCattleData] = useState([]); // etc.\nuseEffect(()=>{// Escucha los cambios en el estado de autenticación\nconst unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setLoading(false);if(currentUser){setCurrentPage('home');// Si el usuario inicia sesión, llévalo al home\n}});return()=>unsubscribe();// Limpia el listener al desmontar\n},[]);useEffect(()=>{if(user){// Si hay un usuario, nos suscribimos a sus datos de propietarios\nconst q=query(collection(db,'users',user.uid,'owners'));const unsubscribe=onSnapshot(q,querySnapshot=>{const ownersData=[];querySnapshot.forEach(doc=>{ownersData.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setOwners(ownersData);});return()=>unsubscribe();// Limpia el listener al cambiar de usuario o desmontar\n}else{// Si no hay usuario, la lista de propietarios está vacía\nsetOwners([]);}},[user]);// Este efecto se ejecuta cada vez que el usuario cambia\nif(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando...\"});// Muestra un loader mientras se verifica el usuario\n}if(!user){return/*#__PURE__*/_jsx(AuthScreen,{});// Si no hay usuario, muestra la pantalla de login/registro\n}// Si hay un usuario, muestra la aplicación principal\nconst renderPage=()=>{switch(currentPage){case'registerOwner':return/*#__PURE__*/_jsx(RegisterOwnerScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,user:user});// Aquí irían los otros casos para las demás pantallas\n// case 'registerCattle':\n//     return <RegisterCattleScreen ... />;\ncase'home':default:return/*#__PURE__*/_jsx(HomeScreen,{navigate:setCurrentPage});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-stone-100 min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(Header,{title:\"Finca Moreno Z\",onMenuClick:()=>{}}),/*#__PURE__*/_jsx(\"main\",{children:renderPage()})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","Plus","Edit","Search","Menu","X","Save","FileText","Users","Activity","Home","LogOut","UserPlus","LogIn","auth","db","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","collection","addDoc","onSnapshot","query","doc","updateDoc","deleteDoc","jsx","_jsx","jsxs","_jsxs","AuthScreen","isLogin","setIsLogin","email","setEmail","password","setPassword","error","setError","handleAuth","e","preventDefault","err","message","className","children","src","alt","onSubmit","type","value","onChange","target","required","size","onClick","Modal","_ref","onClose","title","Header","_ref2","onMenuClick","handleLogout","RegisterOwnerScreen","_ref3","onCancel","owners","user","name","setName","handleSave","trim","ownersCollectionRef","uid","alert","console","length","map","owner","id","HomeScreen","_ref4","navigate","buttons","label","page","icon","btn","App","setUser","loading","setLoading","currentPage","setCurrentPage","setOwners","unsubscribe","currentUser","q","querySnapshot","ownersData","forEach","push","_objectSpread","data","renderPage"],"sources":["C:/Users/alezv/Desktop/App/React/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Plus, Edit, Search, Menu, X, Save, FileText, Users, Activity, Home, LogOut, UserPlus, LogIn } from 'lucide-react';\r\n\r\n// Importa los servicios de Firebase desde tu archivo de configuración\r\nimport { auth, db } from './firebase'; \r\nimport { \r\n  onAuthStateChanged, \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut \r\n} from \"firebase/auth\";\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  onSnapshot, \r\n  query, \r\n  doc, \r\n  updateDoc,\r\n  deleteDoc\r\n} from \"firebase/firestore\";\r\n\r\n\r\n// --- Pantalla de Autenticación (Login y Registro) ---\r\nconst AuthScreen = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleAuth = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      if (isLogin) {\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n      } else {\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\">\r\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\">\r\n        <div className=\"flex justify-center mb-6\">\r\n          <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-20 w-20\" />\r\n        </div>\r\n        <h2 className=\"text-3xl font-bold text-center text-emerald-800 mb-2\">\r\n          {isLogin ? 'Iniciar Sesión' : 'Crear Cuenta'}\r\n        </h2>\r\n        <p className=\"text-center text-stone-500 mb-8\">Bienvenido a Finca Moreno Z</p>\r\n        \r\n        <form onSubmit={handleAuth}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Correo Electrónico</label>\r\n            <input \r\n              type=\"email\" \r\n              value={email} \r\n              onChange={(e) => setEmail(e.target.value)} \r\n              className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\"\r\n              required \r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Contraseña</label>\r\n            <input \r\n              type=\"password\" \r\n              value={password} \r\n              onChange={(e) => setPassword(e.target.value)} \r\n              className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\"\r\n              required \r\n            />\r\n          </div>\r\n          {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n          <button type=\"submit\" className=\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\">\r\n            {isLogin ? <LogIn size={18} /> : <UserPlus size={18} />}\r\n            {isLogin ? 'Ingresar' : 'Registrarse'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <button onClick={() => setIsLogin(!isLogin)} className=\"text-emerald-600 hover:underline\">\r\n            {isLogin ? '¿No tienes una cuenta? Regístrate' : '¿Ya tienes una cuenta? Inicia sesión'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// --- Componentes de la UI (Reutilizados y adaptados) ---\r\nconst Modal = ({ children, onClose, title }) => (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\">\r\n            <div className=\"flex justify-between items-center p-4 border-b border-stone-200\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800\">{title}</h3>\r\n                <button onClick={onClose} className=\"text-stone-400 hover:text-stone-600\"><X size={24} /></button>\r\n            </div>\r\n            <div className=\"p-6\">{children}</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst Header = ({ title, onMenuClick }) => {\r\n  const handleLogout = () => {\r\n    signOut(auth);\r\n  };\r\n\r\n  return (\r\n    <header className=\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\">\r\n        <div className=\"flex items-center\">\r\n            <button onClick={onMenuClick} className=\"mr-4 p-2 rounded-full hover:bg-emerald-700\"><Menu size={24} /></button>\r\n            <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-10 w-10 rounded-full bg-white p-1 object-contain\" />\r\n            <h1 className=\"text-2xl font-bold ml-4 tracking-wider\">{title}</h1>\r\n        </div>\r\n        <button onClick={handleLogout} className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\">\r\n          <LogOut size={18} />\r\n          Salir\r\n        </button>\r\n    </header>\r\n  );\r\n};\r\n\r\n// --- Pantallas de la Aplicación (Adaptadas para Firebase) ---\r\n\r\n// NOTA: La lógica de las pantallas (RegisterOwner, RegisterCattle, etc.)\r\n// necesitaría ser reescrita para usar las funciones de Firestore (`addDoc`, `onSnapshot`, etc.)\r\n// en lugar de manejar el estado localmente.\r\n// Por simplicidad, aquí se muestra la estructura principal y la pantalla de Propietarios adaptada.\r\n\r\nconst RegisterOwnerScreen = ({ onCancel, owners, user }) => {\r\n    const [name, setName] = useState('');\r\n\r\n    const handleSave = async () => {\r\n        if (name.trim() && user) {\r\n            try {\r\n                // Crea una referencia a la subcolección 'owners' del usuario actual\r\n                const ownersCollectionRef = collection(db, 'users', user.uid, 'owners');\r\n                await addDoc(ownersCollectionRef, { name: name.trim() });\r\n                alert('Propietario guardado con éxito!');\r\n                onCancel(); // Vuelve a la pantalla principal\r\n            } catch (error) {\r\n                console.error(\"Error al guardar propietario: \", error);\r\n                alert(\"Hubo un error al guardar. Inténtalo de nuevo.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Registrar Nuevo Propietario</h2>\r\n                <div className=\"mb-6\">\r\n                    <label className=\"block text-stone-700 font-medium mb-2\">Nombre y Apellidos</label>\r\n                    <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" />\r\n                </div>\r\n                <div className=\"flex justify-end gap-4\">\r\n                    <button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\">Cancelar</button>\r\n                    <button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\"><Save size={18}/> Guardar</button>\r\n                </div>\r\n            </div>\r\n            <div className=\"mt-8 bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800 mb-4\">Propietarios Registrados</h3>\r\n                {owners.length > 0 ? (\r\n                    <ul className=\"divide-y divide-stone-200\">\r\n                        {owners.map(owner => <li key={owner.id} className=\"py-3 text-stone-600\">{owner.name}</li>)}\r\n                    </ul>\r\n                ) : (\r\n                    <p className=\"text-stone-500\">No hay propietarios registrados.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst HomeScreen = ({ navigate }) => {\r\n    const buttons = [\r\n        { label: 'Registro de Res', page: 'registerCattle', icon: <Plus className=\"w-12 h-12\" /> },\r\n        { label: 'Actualización de Res', page: 'updateCattle', icon: <Edit className=\"w-12 h-12\" /> },\r\n        { label: 'Consultar', page: 'consult', icon: <FileText className=\"w-12 h-12\" /> },\r\n        { label: 'Registro de Actividades', page: 'activities', icon: <Activity className=\"w-12 h-12\" /> },\r\n        { label: 'Registrar Propietarios', page: 'registerOwner', icon: <Users className=\"w-12 h-12\" /> },\r\n    ];\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-6 p-6\">\r\n            {buttons.map((btn) => (\r\n                <button key={btn.page} onClick={() => navigate(btn.page)} className=\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\">\r\n                    {btn.icon}\r\n                    <span className=\"mt-4 font-semibold text-lg\">{btn.label}</span>\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Componente Principal de la App ---\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState('home');\r\n    \r\n    // Estados para los datos de Firestore\r\n    const [owners, setOwners] = useState([]);\r\n    // const [cattleData, setCattleData] = useState([]); // etc.\r\n\r\n    useEffect(() => {\r\n        // Escucha los cambios en el estado de autenticación\r\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n            setUser(currentUser);\r\n            setLoading(false);\r\n            if(currentUser) {\r\n                setCurrentPage('home'); // Si el usuario inicia sesión, llévalo al home\r\n            }\r\n        });\r\n        return () => unsubscribe(); // Limpia el listener al desmontar\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            // Si hay un usuario, nos suscribimos a sus datos de propietarios\r\n            const q = query(collection(db, 'users', user.uid, 'owners'));\r\n            const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n                const ownersData = [];\r\n                querySnapshot.forEach((doc) => {\r\n                    ownersData.push({ ...doc.data(), id: doc.id });\r\n                });\r\n                setOwners(ownersData);\r\n            });\r\n            return () => unsubscribe(); // Limpia el listener al cambiar de usuario o desmontar\r\n        } else {\r\n            // Si no hay usuario, la lista de propietarios está vacía\r\n            setOwners([]);\r\n        }\r\n    }, [user]); // Este efecto se ejecuta cada vez que el usuario cambia\r\n\r\n    if (loading) {\r\n        return <div>Cargando...</div>; // Muestra un loader mientras se verifica el usuario\r\n    }\r\n\r\n    if (!user) {\r\n        return <AuthScreen />; // Si no hay usuario, muestra la pantalla de login/registro\r\n    }\r\n\r\n    // Si hay un usuario, muestra la aplicación principal\r\n    const renderPage = () => {\r\n        switch (currentPage) {\r\n            case 'registerOwner':\r\n                return <RegisterOwnerScreen onCancel={() => setCurrentPage('home')} owners={owners} user={user} />;\r\n            // Aquí irían los otros casos para las demás pantallas\r\n            // case 'registerCattle':\r\n            //     return <RegisterCattleScreen ... />;\r\n            case 'home':\r\n            default:\r\n                return <HomeScreen navigate={setCurrentPage} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-stone-100 min-h-screen font-sans\">\r\n            <Header title=\"Finca Moreno Z\" onMenuClick={() => {}} />\r\n            <main>\r\n                {renderPage()}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}