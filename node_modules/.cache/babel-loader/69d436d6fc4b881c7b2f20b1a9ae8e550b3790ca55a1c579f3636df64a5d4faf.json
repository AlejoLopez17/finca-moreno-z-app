{"ast":null,"code":"import _objectSpread from\"C:/Users/alezv/Desktop/App/React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{Plus,Edit,Search,Menu,X,Save,FileText,Users,Activity,Home,LogOut,UserPlus,LogIn,ChevronLeft,ChevronRight}from'lucide-react';// Importa los servicios de Firebase desde tu archivo de configuración\nimport{auth,db}from'./firebase';import{onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from\"firebase/auth\";import{collection,addDoc,onSnapshot,query,doc,updateDoc,writeBatch,where,getDocs}from\"firebase/firestore\";// --- Pantalla de Autenticación (Login y Registro) ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AuthScreen=()=>{const[isLogin,setIsLogin]=useState(true);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleAuth=async e=>{e.preventDefault();setError('');try{if(isLogin){await signInWithEmailAndPassword(auth,email,password);}else{await createUserWithEmailAndPassword(auth,email,password);}}catch(err){setError(\"Error: \"+err.message.replace('Firebase: ',''));}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-20 w-20\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-emerald-800 mb-2\",children:isLogin?'Iniciar Sesión':'Crear Cuenta'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-stone-500 mb-8\",children:\"Bienvenido a Finca Moreno Z\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuth,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\",required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-4\",children:error}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\",children:[isLogin?/*#__PURE__*/_jsx(LogIn,{size:18}):/*#__PURE__*/_jsx(UserPlus,{size:18}),isLogin?'Ingresar':'Registrarse']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLogin(!isLogin),className:\"text-emerald-600 hover:underline\",children:isLogin?'¿No tienes una cuenta? Regístrate':'¿Ya tienes una cuenta? Inicia sesión'})})]})});};// --- Componentes de la UI (Reutilizados) ---\nconst Modal=_ref=>{let{children,onClose,title}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b border-stone-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800\",children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-stone-400 hover:text-stone-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:children})]})});};const Header=_ref2=>{let{title,onMenuClick}=_ref2;const handleLogout=()=>{signOut(auth);};return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onMenuClick,className:\"mr-4 p-2 rounded-full hover:bg-emerald-700\",children:/*#__PURE__*/_jsx(Menu,{size:24})}),/*#__PURE__*/_jsx(\"img\",{src:\"http://googleusercontent.com/file_content/2\",alt:\"Logo\",className:\"h-10 w-10 rounded-full bg-white p-1 object-contain\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold ml-4 tracking-wider\",children:title})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\",children:[/*#__PURE__*/_jsx(LogOut,{size:18}),\" Salir\"]})]});};const SideMenu=_ref3=>{let{isOpen,onClose,navigate}=_ref3;const menuItems=[{name:'Inicio',page:'home',icon:/*#__PURE__*/_jsx(Home,{size:20})},{name:'Registrar Res',page:'registerCattle',icon:/*#__PURE__*/_jsx(Plus,{size:20})},{name:'Actualizar Res',page:'updateCattle',icon:/*#__PURE__*/_jsx(Edit,{size:20})},{name:'Consultar',page:'consult',icon:/*#__PURE__*/_jsx(FileText,{size:20})},{name:'Actividades',page:'activities',icon:/*#__PURE__*/_jsx(Activity,{size:20})},{name:'Propietarios',page:'registerOwner',icon:/*#__PURE__*/_jsx(Users,{size:20})}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity \".concat(isOpen?'opacity-100':'opacity-0 pointer-events-none'),onClick:onClose}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed top-0 left-0 h-full bg-white w-72 shadow-xl z-50 transform transition-transform \".concat(isOpen?'translate-x-0':'-translate-x-full'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-emerald-800\",children:\"Men\\xFA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-stone-500 hover:text-stone-800\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"p-4\",children:/*#__PURE__*/_jsx(\"ul\",{children:menuItems.map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigate(item.page);onClose();},className:\"w-full text-left flex items-center gap-3 px-4 py-3 rounded-lg text-stone-700 hover:bg-emerald-50 hover:text-emerald-800 font-medium transition-all\",children:[item.icon,item.name]})},item.page))})})]})]});};// --- Lógica de Negocio ---\nconst calculateAgeInMonths=birthDate=>{if(!birthDate)return 0;const today=new Date();const birth=new Date(birthDate);let months=(today.getFullYear()-birth.getFullYear())*12;months-=birth.getMonth();months+=today.getMonth();return months<=0?0:months;};const determineCattleType=cattle=>{if(!cattle||!cattle.birthDate||!cattle.gender)return'N/A';const ageInMonths=calculateAgeInMonths(cattle.birthDate);if(ageInMonths<=12)return'Ternero/a';if(cattle.gender==='Hembra'){if(cattle.offspring&&cattle.offspring.length>0){const lastParto=new Date(Math.max(...cattle.offspring.map(o=>new Date(o.birthDate))));const monthsSinceParto=calculateAgeInMonths(lastParto);return monthsSinceParto<=12?'Vaca Parida':'Vaca Horra';}return ageInMonths<=24?'Novilla':'Vaca';}if(cattle.gender==='Macho'){if(ageInMonths<=24)return'Levante';if(cattle.isCastrated===true)return'Macho de Engorde';if(cattle.isCastrated===false)return'Toro';return'Macho Adulto';}return'Desconocido';};// --- Pantallas de la Aplicación ---\nconst HomeScreen=_ref4=>{let{navigate}=_ref4;const buttons=[{label:'Registro de Res',page:'registerCattle',icon:/*#__PURE__*/_jsx(Plus,{className:\"w-12 h-12\"})},{label:'Actualización de Res',page:'updateCattle',icon:/*#__PURE__*/_jsx(Edit,{className:\"w-12 h-12\"})},{label:'Consultar',page:'consult',icon:/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12\"})},{label:'Registro de Actividades',page:'activities',icon:/*#__PURE__*/_jsx(Activity,{className:\"w-12 h-12\"})},{label:'Registrar Propietarios',page:'registerOwner',icon:/*#__PURE__*/_jsx(Users,{className:\"w-12 h-12\"})}];return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-6 p-6\",children:buttons.map(btn=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(btn.page),className:\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\",children:[btn.icon,/*#__PURE__*/_jsx(\"span\",{className:\"mt-4 font-semibold text-lg\",children:btn.label})]},btn.page))});};const RegisterOwnerScreen=_ref5=>{let{onCancel,owners,user}=_ref5;const[name,setName]=useState('');const handleSave=async()=>{if(name.trim()&&user){try{const ownersCollectionRef=collection(db,'users',user.uid,'owners');await addDoc(ownersCollectionRef,{name:name.trim()});alert('Propietario guardado con éxito!');onCancel();}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Registrar Nuevo Propietario\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Nombre y Apellidos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\" Guardar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-emerald-800 mb-4\",children:\"Propietarios Registrados\"}),owners.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-stone-200\",children:owners.map(owner=>/*#__PURE__*/_jsx(\"li\",{className:\"py-3 text-stone-600\",children:owner.name},owner.docId))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-stone-500\",children:\"No hay propietarios registrados.\"})]})]});};const RegisterCattleScreen=_ref6=>{let{onCancel,owners,cattleData,user}=_ref6;const[form,setForm]=useState({id:'',birthDate:'',gender:'Hembra',weight:'',parentsId:'',lastVaccines:'',ownerId:owners.length>0?owners[0].docId:''});const[useAutoId,setUseAutoId]=useState(true);const cattleType=useMemo(()=>determineCattleType(form),[form.birthDate,form.gender]);const handleChange=e=>{const{name,value}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const generateAutoId=()=>{const allIds=cattleData.map(c=>c.customId.replace(/^[VM]-/,'')).filter(id=>id.startsWith('FMZ-'));const lastIdNum=allIds.length>0?Math.max(...allIds.map(id=>parseInt(id.split('-')[1]))):0;return\"FMZ-\".concat(String(lastIdNum+1).padStart(3,'0'));};const handleSave=async()=>{const finalId=useAutoId?generateAutoId():form.id.trim();if(!finalId||!form.birthDate||!form.weight||!form.ownerId){alert(\"Por favor, completa todos los campos obligatorios.\");return;}if(!useAutoId&&cattleData.some(c=>c.customId.toUpperCase()===finalId.toUpperCase())){alert(\"El código de identificación manual ya existe.\");return;}if(user){try{const cattleCollectionRef=collection(db,'users',user.uid,'cattle');await addDoc(cattleCollectionRef,_objectSpread(_objectSpread({},form),{},{customId:finalId,status:'Viva',offspring:[],weight:parseFloat(form.weight),createdAt:new Date()}));alert('Res guardada con éxito!');onCancel();}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Registrar Nueva Res\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"C\\xF3digo de Identificaci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"id\",value:useAutoId?generateAutoId():form.id,onChange:handleChange,disabled:useAutoId,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg disabled:bg-stone-100\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setUseAutoId(!useAutoId),className:\"px-4 py-3 rounded-lg font-semibold transition-colors \".concat(useAutoId?'bg-emerald-600 text-white':'bg-stone-200'),children:\"Auto\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Fecha de Nacimiento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"birthDate\",value:form.birthDate,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"G\\xE9nero\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"gender\",value:form.gender,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Hembra\",children:\"Hembra\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Macho\",children:\"Macho\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Peso (Kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"weight\",value:form.weight,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"C\\xF3digo de los Padres\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"parentsId\",value:form.parentsId,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Tipo de Cabeza de Ganado\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:cattleType,disabled:true,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-stone-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"\\xDAltimas Vacunas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastVaccines\",value:form.lastVaccines,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-stone-700 font-medium mb-2\",children:\"Propietario\"}),/*#__PURE__*/_jsx(\"select\",{name:\"ownerId\",value:form.ownerId,onChange:handleChange,className:\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\",disabled:owners.length===0,children:owners.length>0?owners.map(o=>/*#__PURE__*/_jsx(\"option\",{value:o.docId,children:o.name},o.docId)):/*#__PURE__*/_jsx(\"option\",{children:\"Registre un propietario primero\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\" Guardar\"]})]})]})});};const UpdateCattleScreen=_ref7=>{let{onCancel,owners,user}=_ref7;const[searchTerm,setSearchTerm]=useState('');const[selectedCattle,setSelectedCattle]=useState(null);const[form,setForm]=useState(null);const handleSearch=async()=>{const q=query(collection(db,'users',user.uid,'cattle'),where(\"customId\",\"==\",searchTerm.trim().toUpperCase()));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){const doc=querySnapshot.docs[0];const foundCattle=_objectSpread(_objectSpread({},doc.data()),{},{docId:doc.id});setSelectedCattle(foundCattle);setForm(foundCattle);}else{alert(\"Código inexistente, valide que este correcto\");setSelectedCattle(null);setForm(null);}};const handleUpdate=async()=>{const cattleDocRef=doc(db,'users',user.uid,'cattle',selectedCattle.docId);await updateDoc(cattleDocRef,form);alert(\"Información actualizada con éxito\");onCancel();};const handleStatusChange=async(newStatus,date)=>{const batch=writeBatch(db);const oldDocRef=doc(db,'users',user.uid,'cattle',selectedCattle.docId);const newDocRef=doc(collection(db,'users',user.uid,'deceasedSoldCattle'));const newCustomId=\"\".concat(newStatus==='Vendida'?'V':'M',\"-\").concat(selectedCattle.customId);const updatedData=_objectSpread(_objectSpread(_objectSpread({},selectedCattle),form),{},{status:newStatus,statusChangeDate:date,customId:newCustomId,originalDocId:selectedCattle.docId});delete updatedData.docId;batch.set(newDocRef,updatedData);batch.delete(oldDocRef);await batch.commit();alert(\"El estado de la res ha sido actualizado a \".concat(newStatus,\".\"));onCancel();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Actualizar Res\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Buscar por c\\xF3digo...\",className:\"w-full px-4 py-3 border rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\",children:/*#__PURE__*/_jsx(Search,{size:18})})]})]}),selectedCattle&&form&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Editando: \",form.customId]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"px-6 py-3 rounded-lg bg-stone-200\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white\",children:\"Actualizar\"})]})]})]});};const ConsultScreen=_ref8=>{let{cattleData,owners,deceasedSoldData}=_ref8;const[view,setView]=useState('menu');const[selectedOwner,setSelectedOwner]=useState(null);const[detailsModal,setDetailsModal]=useState({isOpen:false,cattle:null});const CattleCard=_ref9=>{let{cattle,onClick}=_ref9;const owner=owners.find(o=>o.docId===cattle.ownerId);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onClick(cattle),className:\"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-amber-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg text-stone-800\",children:cattle.customId}),/*#__PURE__*/_jsx(\"p\",{className:\"text-stone-600\",children:determineCattleType(cattle)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(cattle.status==='Viva'?'bg-emerald-100 text-emerald-800':'bg-red-100 text-red-800'),children:cattle.status})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 pt-3 border-t\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-stone-500\",children:[\"Propietario: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-stone-700\",children:owner?owner.name:'N/A'})]})})]});};const renderContent=()=>{switch(view){case'byOwner':if(!selectedOwner){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('menu'),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Selecciona un Propietario\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:owners.map(o=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOwner(o),className:\"w-full text-left p-4 bg-stone-100 rounded-lg hover:bg-emerald-50\",children:o.name},o.docId))})]});}const ownerCattle=cattleData.filter(c=>c.ownerId===selectedOwner.docId);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOwner(null),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold mb-4\",children:[\"Reses de \",selectedOwner.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:ownerCattle.length>0?ownerCattle.map(c=>/*#__PURE__*/_jsx(CattleCard,{cattle:c,onClick:cattle=>setDetailsModal({isOpen:true,cattle})},c.docId)):/*#__PURE__*/_jsx(\"p\",{children:\"Este propietario no tiene reses.\"})})]});case'all':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('menu'),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Listado de Reses Vivas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:cattleData.map(c=>/*#__PURE__*/_jsx(CattleCard,{cattle:c,onClick:cattle=>setDetailsModal({isOpen:true,cattle})},c.docId))})]});case'deceasedSold':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('menu'),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Listado de Reses Vendidas o Muertas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:deceasedSoldData.map(c=>/*#__PURE__*/_jsx(CattleCard,{cattle:c,onClick:cattle=>setDetailsModal({isOpen:true,cattle})},c.docId))})]});default:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('byOwner'),className:\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\",children:\"Consultar por Propietarios\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('all'),className:\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\",children:\"Listado de Reses Vivas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('deceasedSold'),className:\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\",children:\"Listado de Reses Muertas o Vendidas\"})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Consultar Registros\"}),renderContent()]}),detailsModal.isOpen&&detailsModal.cattle&&/*#__PURE__*/_jsxs(Modal,{onClose:()=>setDetailsModal({isOpen:false}),title:\"Detalles de \".concat(detailsModal.cattle.customId),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[Object.entries(detailsModal.cattle).map(_ref0=>{let[key,value]=_ref0;if(['docId','createdAt','originalDocId'].includes(key))return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-stone-600 capitalize\",children:[key.replace(/([A-Z])/g,' $1'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-stone-800\",children:String(value)})]},key);}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-stone-600\",children:\"Tipo de Ganado:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-stone-800\",children:determineCattleType(detailsModal.cattle)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDetailsModal({isOpen:false}),className:\"px-6 py-2 rounded-lg bg-emerald-600 text-white\",children:\"Cerrar\"})})]})]});};const RegisterActivitiesScreen=_ref1=>{let{onCancel,activities,user}=_ref1;const[view,setView]=useState('menu');const[form,setForm]=useState({date:'',status:'En curso',observations:''});const handleSave=async()=>{if(form.date&&form.observations&&user){try{const activitiesCollectionRef=collection(db,'users',user.uid,'activities');await addDoc(activitiesCollectionRef,_objectSpread(_objectSpread({},form),{},{createdAt:new Date()}));alert('Actividad guardada con éxito!');setForm({date:'',status:'En curso',observations:''});setView('consult');}catch(error){console.error(\"Error: \",error);alert(\"Hubo un error al guardar.\");}}};const sortedActivities=useMemo(()=>[...activities].sort((a,b)=>new Date(b.date)-new Date(a.date)),[activities]);return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-emerald-800 mb-6\",children:\"Gesti\\xF3n de Actividades\"}),view==='menu'?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('add'),className:\"w-full p-6 bg-white rounded-lg shadow-md text-center text-lg font-semibold hover:bg-emerald-50\",children:\"Agregar Actividad\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('consult'),className:\"w-full p-6 bg-white rounded-lg shadow-md text-center text-lg font-semibold hover:bg-emerald-50\",children:\"Consultar Registro\"})]}):view==='add'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('menu'),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Agregar Nueva Actividad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.date,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{date:e.target.value})),className:\"w-full px-4 py-2 border rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Estado\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.status,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{status:e.target.value})),className:\"w-full px-4 py-2 border rounded-lg bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"En curso\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Completada\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Observaciones\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.observations,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{observations:e.target.value})),rows:\"4\",className:\"w-full px-4 py-2 border rounded-lg\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\",children:\"Guardar\"})})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('menu'),className:\"mb-4 text-emerald-600 font-semibold\",children:\"\\u2190 Volver\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Registro de Actividades\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:sortedActivities.map(act=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-stone-50 rounded-lg border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:act.date}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-bold rounded-full \".concat(act.status==='Completada'?'bg-emerald-200 text-emerald-800':'bg-amber-200 text-amber-800'),children:act.status})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-stone-600\",children:act.observations})]},act.docId))})]})]})});};// --- Componente Principal de la App ---\nexport default function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState('home');const[isMenuOpen,setIsMenuOpen]=useState(false);const[owners,setOwners]=useState([]);const[cattleData,setCattleData]=useState([]);const[deceasedSoldData,setDeceasedSoldData]=useState([]);const[activities,setActivities]=useState([]);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setLoading(false);if(currentUser){setCurrentPage('home');}});return()=>unsubscribe();},[]);useEffect(()=>{if(user){const collections=['owners','cattle','deceasedSoldCattle','activities'];const setters=[setOwners,setCattleData,setDeceasedSoldData,setActivities];const unsubscribes=collections.map((col,index)=>{const q=query(collection(db,'users',user.uid,col));return onSnapshot(q,querySnapshot=>{const data=[];querySnapshot.forEach(doc=>{data.push(_objectSpread(_objectSpread({},doc.data()),{},{docId:doc.id}));});setters[index](data);});});return()=>unsubscribes.forEach(unsub=>unsub());}else{setOwners([]);setCattleData([]);setDeceasedSoldData([]);setActivities([]);}},[user]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:\"Cargando...\"});}if(!user){return/*#__PURE__*/_jsx(AuthScreen,{});}const renderPage=()=>{switch(currentPage){case'registerOwner':return/*#__PURE__*/_jsx(RegisterOwnerScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,user:user});case'registerCattle':return/*#__PURE__*/_jsx(RegisterCattleScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,cattleData:cattleData,user:user});case'updateCattle':return/*#__PURE__*/_jsx(UpdateCattleScreen,{onCancel:()=>setCurrentPage('home'),owners:owners,user:user});case'consult':return/*#__PURE__*/_jsx(ConsultScreen,{cattleData:cattleData,owners:owners,deceasedSoldData:deceasedSoldData});case'activities':return/*#__PURE__*/_jsx(RegisterActivitiesScreen,{onCancel:()=>setCurrentPage('home'),activities:activities,user:user});case'home':default:return/*#__PURE__*/_jsx(HomeScreen,{navigate:setCurrentPage});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-stone-100 min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(SideMenu,{isOpen:isMenuOpen,onClose:()=>setIsMenuOpen(false),navigate:setCurrentPage}),/*#__PURE__*/_jsx(Header,{title:\"Finca Moreno Z\",onMenuClick:()=>setIsMenuOpen(true)}),/*#__PURE__*/_jsx(\"main\",{children:renderPage()})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","Plus","Edit","Search","Menu","X","Save","FileText","Users","Activity","Home","LogOut","UserPlus","LogIn","ChevronLeft","ChevronRight","auth","db","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","collection","addDoc","onSnapshot","query","doc","updateDoc","writeBatch","where","getDocs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthScreen","isLogin","setIsLogin","email","setEmail","password","setPassword","error","setError","handleAuth","e","preventDefault","err","message","replace","className","children","src","alt","onSubmit","type","value","onChange","target","required","size","onClick","Modal","_ref","onClose","title","Header","_ref2","onMenuClick","handleLogout","SideMenu","_ref3","isOpen","navigate","menuItems","name","page","icon","concat","map","item","calculateAgeInMonths","birthDate","today","Date","birth","months","getFullYear","getMonth","determineCattleType","cattle","gender","ageInMonths","offspring","length","lastParto","Math","max","o","monthsSinceParto","isCastrated","HomeScreen","_ref4","buttons","label","btn","RegisterOwnerScreen","_ref5","onCancel","owners","user","setName","handleSave","trim","ownersCollectionRef","uid","alert","console","owner","docId","RegisterCattleScreen","_ref6","cattleData","form","setForm","id","weight","parentsId","lastVaccines","ownerId","useAutoId","setUseAutoId","cattleType","handleChange","prev","_objectSpread","generateAutoId","allIds","c","customId","filter","startsWith","lastIdNum","parseInt","split","String","padStart","finalId","some","toUpperCase","cattleCollectionRef","status","parseFloat","createdAt","disabled","UpdateCattleScreen","_ref7","searchTerm","setSearchTerm","selectedCattle","setSelectedCattle","handleSearch","q","querySnapshot","empty","docs","foundCattle","data","handleUpdate","cattleDocRef","handleStatusChange","newStatus","date","batch","oldDocRef","newDocRef","newCustomId","updatedData","statusChangeDate","originalDocId","set","delete","commit","placeholder","ConsultScreen","_ref8","deceasedSoldData","view","setView","selectedOwner","setSelectedOwner","detailsModal","setDetailsModal","CattleCard","_ref9","find","renderContent","ownerCattle","Object","entries","_ref0","key","includes","RegisterActivitiesScreen","_ref1","activities","observations","activitiesCollectionRef","sortedActivities","sort","a","b","rows","act","App","setUser","loading","setLoading","currentPage","setCurrentPage","isMenuOpen","setIsMenuOpen","setOwners","setCattleData","setDeceasedSoldData","setActivities","unsubscribe","currentUser","collections","setters","unsubscribes","col","index","forEach","push","unsub","renderPage"],"sources":["C:/Users/alezv/Desktop/App/React/src/App.js"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { Plus, Edit, Search, Menu, X, Save, FileText, Users, Activity, Home, LogOut, UserPlus, LogIn, ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\n// Importa los servicios de Firebase desde tu archivo de configuración\r\nimport { auth, db } from './firebase'; \r\nimport { \r\n  onAuthStateChanged, \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut \r\n} from \"firebase/auth\";\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  onSnapshot, \r\n  query, \r\n  doc, \r\n  updateDoc,\r\n  writeBatch,\r\n  where,\r\n  getDocs\r\n} from \"firebase/firestore\";\r\n\r\n\r\n// --- Pantalla de Autenticación (Login y Registro) ---\r\nconst AuthScreen = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleAuth = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      if (isLogin) {\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n      } else {\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error: \" + err.message.replace('Firebase: ', ''));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-stone-100 flex flex-col justify-center items-center p-4\">\r\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8\">\r\n        <div className=\"flex justify-center mb-6\">\r\n          <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-20 w-20\" />\r\n        </div>\r\n        <h2 className=\"text-3xl font-bold text-center text-emerald-800 mb-2\">\r\n          {isLogin ? 'Iniciar Sesión' : 'Crear Cuenta'}\r\n        </h2>\r\n        <p className=\"text-center text-stone-500 mb-8\">Bienvenido a Finca Moreno Z</p>\r\n        \r\n        <form onSubmit={handleAuth}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Correo Electrónico</label>\r\n            <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" required />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-stone-700 font-medium mb-2\">Contraseña</label>\r\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" required />\r\n          </div>\r\n          {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n          <button type=\"submit\" className=\"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2\">\r\n            {isLogin ? <LogIn size={18} /> : <UserPlus size={18} />}\r\n            {isLogin ? 'Ingresar' : 'Registrarse'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <button onClick={() => setIsLogin(!isLogin)} className=\"text-emerald-600 hover:underline\">\r\n            {isLogin ? '¿No tienes una cuenta? Regístrate' : '¿Ya tienes una cuenta? Inicia sesión'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// --- Componentes de la UI (Reutilizados) ---\r\nconst Modal = ({ children, onClose, title }) => (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4\">\r\n        <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4\">\r\n            <div className=\"flex justify-between items-center p-4 border-b border-stone-200\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800\">{title}</h3>\r\n                <button onClick={onClose} className=\"text-stone-400 hover:text-stone-600\"><X size={24} /></button>\r\n            </div>\r\n            <div className=\"p-6\">{children}</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst Header = ({ title, onMenuClick }) => {\r\n  const handleLogout = () => { signOut(auth); };\r\n  return (\r\n    <header className=\"bg-emerald-800 text-white p-4 shadow-lg flex items-center justify-between sticky top-0 z-40\">\r\n        <div className=\"flex items-center\">\r\n            <button onClick={onMenuClick} className=\"mr-4 p-2 rounded-full hover:bg-emerald-700\"><Menu size={24} /></button>\r\n            <img src=\"http://googleusercontent.com/file_content/2\" alt=\"Logo\" className=\"h-10 w-10 rounded-full bg-white p-1 object-contain\" />\r\n            <h1 className=\"text-2xl font-bold ml-4 tracking-wider\">{title}</h1>\r\n        </div>\r\n        <button onClick={handleLogout} className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-emerald-700 font-semibold\">\r\n          <LogOut size={18} /> Salir\r\n        </button>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst SideMenu = ({ isOpen, onClose, navigate }) => {\r\n    const menuItems = [\r\n        { name: 'Inicio', page: 'home', icon: <Home size={20} /> },\r\n        { name: 'Registrar Res', page: 'registerCattle', icon: <Plus size={20} /> },\r\n        { name: 'Actualizar Res', page: 'updateCattle', icon: <Edit size={20} /> },\r\n        { name: 'Consultar', page: 'consult', icon: <FileText size={20} /> },\r\n        { name: 'Actividades', page: 'activities', icon: <Activity size={20} /> },\r\n        { name: 'Propietarios', page: 'registerOwner', icon: <Users size={20} /> },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <div className={`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`} onClick={onClose}></div>\r\n            <div className={`fixed top-0 left-0 h-full bg-white w-72 shadow-xl z-50 transform transition-transform ${isOpen ? 'translate-x-0' : '-translate-x-full'}`}>\r\n                <div className=\"p-4 border-b flex justify-between items-center\">\r\n                    <h2 className=\"text-xl font-bold text-emerald-800\">Menú</h2>\r\n                    <button onClick={onClose} className=\"text-stone-500 hover:text-stone-800\"><X size={24} /></button>\r\n                </div>\r\n                <nav className=\"p-4\">\r\n                    <ul>\r\n                        {menuItems.map(item => (\r\n                            <li key={item.page}>\r\n                                <button onClick={() => { navigate(item.page); onClose(); }} className=\"w-full text-left flex items-center gap-3 px-4 py-3 rounded-lg text-stone-700 hover:bg-emerald-50 hover:text-emerald-800 font-medium transition-all\">\r\n                                    {item.icon}\r\n                                    {item.name}\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n// --- Lógica de Negocio ---\r\nconst calculateAgeInMonths = (birthDate) => {\r\n    if (!birthDate) return 0;\r\n    const today = new Date();\r\n    const birth = new Date(birthDate);\r\n    let months = (today.getFullYear() - birth.getFullYear()) * 12;\r\n    months -= birth.getMonth();\r\n    months += today.getMonth();\r\n    return months <= 0 ? 0 : months;\r\n};\r\n\r\nconst determineCattleType = (cattle) => {\r\n    if (!cattle || !cattle.birthDate || !cattle.gender) return 'N/A';\r\n    const ageInMonths = calculateAgeInMonths(cattle.birthDate);\r\n    if (ageInMonths <= 12) return 'Ternero/a';\r\n    if (cattle.gender === 'Hembra') {\r\n        if (cattle.offspring && cattle.offspring.length > 0) {\r\n            const lastParto = new Date(Math.max(...cattle.offspring.map(o => new Date(o.birthDate))));\r\n            const monthsSinceParto = calculateAgeInMonths(lastParto);\r\n            return monthsSinceParto <= 12 ? 'Vaca Parida' : 'Vaca Horra';\r\n        }\r\n        return ageInMonths <= 24 ? 'Novilla' : 'Vaca';\r\n    }\r\n    if (cattle.gender === 'Macho') {\r\n        if (ageInMonths <= 24) return 'Levante';\r\n        if (cattle.isCastrated === true) return 'Macho de Engorde';\r\n        if (cattle.isCastrated === false) return 'Toro';\r\n        return 'Macho Adulto';\r\n    }\r\n    return 'Desconocido';\r\n};\r\n\r\n\r\n// --- Pantallas de la Aplicación ---\r\nconst HomeScreen = ({ navigate }) => {\r\n    const buttons = [\r\n        { label: 'Registro de Res', page: 'registerCattle', icon: <Plus className=\"w-12 h-12\" /> },\r\n        { label: 'Actualización de Res', page: 'updateCattle', icon: <Edit className=\"w-12 h-12\" /> },\r\n        { label: 'Consultar', page: 'consult', icon: <FileText className=\"w-12 h-12\" /> },\r\n        { label: 'Registro de Actividades', page: 'activities', icon: <Activity className=\"w-12 h-12\" /> },\r\n        { label: 'Registrar Propietarios', page: 'registerOwner', icon: <Users className=\"w-12 h-12\" /> },\r\n    ];\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-6 p-6\">\r\n            {buttons.map((btn) => (\r\n                <button key={btn.page} onClick={() => navigate(btn.page)} className=\"bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center text-center text-emerald-800 hover:bg-emerald-50 hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 aspect-square border-b-4 border-amber-400\">\r\n                    {btn.icon}\r\n                    <span className=\"mt-4 font-semibold text-lg\">{btn.label}</span>\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterOwnerScreen = ({ onCancel, owners, user }) => {\r\n    const [name, setName] = useState('');\r\n    const handleSave = async () => {\r\n        if (name.trim() && user) {\r\n            try {\r\n                const ownersCollectionRef = collection(db, 'users', user.uid, 'owners');\r\n                await addDoc(ownersCollectionRef, { name: name.trim() });\r\n                alert('Propietario guardado con éxito!');\r\n                onCancel();\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Registrar Nuevo Propietario</h2>\r\n                <div className=\"mb-6\"><label className=\"block text-stone-700 font-medium mb-2\">Nombre y Apellidos</label><input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div>\r\n                <div className=\"flex justify-end gap-4\"><button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\">Cancelar</button><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\"><Save size={18}/> Guardar</button></div>\r\n            </div>\r\n            <div className=\"mt-8 bg-white p-8 rounded-2xl shadow-lg\">\r\n                <h3 className=\"text-xl font-bold text-emerald-800 mb-4\">Propietarios Registrados</h3>\r\n                {owners.length > 0 ? (<ul className=\"divide-y divide-stone-200\">{owners.map(owner => <li key={owner.docId} className=\"py-3 text-stone-600\">{owner.name}</li>)}</ul>) : (<p className=\"text-stone-500\">No hay propietarios registrados.</p>)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterCattleScreen = ({ onCancel, owners, cattleData, user }) => {\r\n    const [form, setForm] = useState({ id: '', birthDate: '', gender: 'Hembra', weight: '', parentsId: '', lastVaccines: '', ownerId: owners.length > 0 ? owners[0].docId : '' });\r\n    const [useAutoId, setUseAutoId] = useState(true);\r\n    const cattleType = useMemo(() => determineCattleType(form), [form.birthDate, form.gender]);\r\n    const handleChange = (e) => { const { name, value } = e.target; setForm(prev => ({ ...prev, [name]: value })); };\r\n    const generateAutoId = () => {\r\n        const allIds = cattleData.map(c => c.customId.replace(/^[VM]-/, '')).filter(id => id.startsWith('FMZ-'));\r\n        const lastIdNum = allIds.length > 0 ? Math.max(...allIds.map(id => parseInt(id.split('-')[1]))) : 0;\r\n        return `FMZ-${String(lastIdNum + 1).padStart(3, '0')}`;\r\n    };\r\n    const handleSave = async () => {\r\n        const finalId = useAutoId ? generateAutoId() : form.id.trim();\r\n        if (!finalId || !form.birthDate || !form.weight || !form.ownerId) { alert(\"Por favor, completa todos los campos obligatorios.\"); return; }\r\n        if (!useAutoId && cattleData.some(c => c.customId.toUpperCase() === finalId.toUpperCase())) { alert(\"El código de identificación manual ya existe.\"); return; }\r\n        if (user) {\r\n            try {\r\n                const cattleCollectionRef = collection(db, 'users', user.uid, 'cattle');\r\n                await addDoc(cattleCollectionRef, { ...form, customId: finalId, status: 'Viva', offspring: [], weight: parseFloat(form.weight), createdAt: new Date() });\r\n                alert('Res guardada con éxito!');\r\n                onCancel();\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\"><div className=\"bg-white p-8 rounded-2xl shadow-lg\"><h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Registrar Nueva Res</h2><div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\"><div><label className=\"block text-stone-700 font-medium mb-2\">Código de Identificación</label><div className=\"flex items-center gap-2\"><input type=\"text\" name=\"id\" value={useAutoId ? generateAutoId() : form.id} onChange={handleChange} disabled={useAutoId} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg disabled:bg-stone-100\" /><button onClick={() => setUseAutoId(!useAutoId)} className={`px-4 py-3 rounded-lg font-semibold transition-colors ${useAutoId ? 'bg-emerald-600 text-white' : 'bg-stone-200'}`}>Auto</button></div></div><div><label className=\"block text-stone-700 font-medium mb-2\">Fecha de Nacimiento</label><input type=\"date\" name=\"birthDate\" value={form.birthDate} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Género</label><select name=\"gender\" value={form.gender} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\"><option value=\"Hembra\">Hembra</option><option value=\"Macho\">Macho</option></select></div><div><label className=\"block text-stone-700 font-medium mb-2\">Peso (Kg)</label><input type=\"number\" name=\"weight\" value={form.weight} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Código de los Padres</label><input type=\"text\" name=\"parentsId\" value={form.parentsId} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div><label className=\"block text-stone-700 font-medium mb-2\">Tipo de Cabeza de Ganado</label><input type=\"text\" value={cattleType} disabled className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-stone-100\" /></div><div className=\"md:col-span-2\"><label className=\"block text-stone-700 font-medium mb-2\">Últimas Vacunas</label><input type=\"text\" name=\"lastVaccines\" value={form.lastVaccines} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg\" /></div><div className=\"md:col-span-2\"><label className=\"block text-stone-700 font-medium mb-2\">Propietario</label><select name=\"ownerId\" value={form.ownerId} onChange={handleChange} className=\"w-full px-4 py-3 border border-stone-300 rounded-lg bg-white\" disabled={owners.length === 0}>{owners.length > 0 ? owners.map(o => <option key={o.docId} value={o.docId}>{o.name}</option>) : <option>Registre un propietario primero</option>}</select></div></div><div className=\"flex justify-end gap-4 mt-8\"><button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200 text-stone-700 font-semibold\">Cancelar</button><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold flex items-center gap-2\"><Save size={18}/> Guardar</button></div></div></div>\r\n    );\r\n};\r\n\r\nconst UpdateCattleScreen = ({ onCancel, owners, user }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedCattle, setSelectedCattle] = useState(null);\r\n    const [form, setForm] = useState(null);\r\n    const handleSearch = async () => {\r\n        const q = query(collection(db, 'users', user.uid, 'cattle'), where(\"customId\", \"==\", searchTerm.trim().toUpperCase()));\r\n        const querySnapshot = await getDocs(q);\r\n        if (!querySnapshot.empty) {\r\n            const doc = querySnapshot.docs[0];\r\n            const foundCattle = { ...doc.data(), docId: doc.id };\r\n            setSelectedCattle(foundCattle);\r\n            setForm(foundCattle);\r\n        } else { alert(\"Código inexistente, valide que este correcto\"); setSelectedCattle(null); setForm(null); }\r\n    };\r\n    const handleUpdate = async () => {\r\n        const cattleDocRef = doc(db, 'users', user.uid, 'cattle', selectedCattle.docId);\r\n        await updateDoc(cattleDocRef, form);\r\n        alert(\"Información actualizada con éxito\");\r\n        onCancel();\r\n    };\r\n    const handleStatusChange = async (newStatus, date) => {\r\n        const batch = writeBatch(db);\r\n        const oldDocRef = doc(db, 'users', user.uid, 'cattle', selectedCattle.docId);\r\n        const newDocRef = doc(collection(db, 'users', user.uid, 'deceasedSoldCattle'));\r\n        const newCustomId = `${newStatus === 'Vendida' ? 'V' : 'M'}-${selectedCattle.customId}`;\r\n        const updatedData = { ...selectedCattle, ...form, status: newStatus, statusChangeDate: date, customId: newCustomId, originalDocId: selectedCattle.docId };\r\n        delete updatedData.docId;\r\n        batch.set(newDocRef, updatedData);\r\n        batch.delete(oldDocRef);\r\n        await batch.commit();\r\n        alert(`El estado de la res ha sido actualizado a ${newStatus}.`);\r\n        onCancel();\r\n    };\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Actualizar Res</h2>\r\n                <div className=\"flex gap-2\">\r\n                    <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"Buscar por código...\" className=\"w-full px-4 py-3 border rounded-lg\" />\r\n                    <button onClick={handleSearch} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\"><Search size={18}/></button>\r\n                </div>\r\n            </div>\r\n            {selectedCattle && form && (\r\n                <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n                    <p>Editando: {form.customId}</p>\r\n                    {/* Aquí iría el formulario completo para editar los campos */}\r\n                    <div className=\"flex justify-end gap-4 mt-8\">\r\n                        <button onClick={onCancel} className=\"px-6 py-3 rounded-lg bg-stone-200\">Cancelar</button>\r\n                        <button onClick={handleUpdate} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white\">Actualizar</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ConsultScreen = ({ cattleData, owners, deceasedSoldData }) => {\r\n    const [view, setView] = useState('menu');\r\n    const [selectedOwner, setSelectedOwner] = useState(null);\r\n    const [detailsModal, setDetailsModal] = useState({ isOpen: false, cattle: null });\r\n    const CattleCard = ({ cattle, onClick }) => {\r\n        const owner = owners.find(o => o.docId === cattle.ownerId);\r\n        return (\r\n            <div onClick={() => onClick(cattle)} className=\"bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-amber-400\">\r\n                <div className=\"flex justify-between items-start\">\r\n                    <div><p className=\"font-bold text-lg text-stone-800\">{cattle.customId}</p><p className=\"text-stone-600\">{determineCattleType(cattle)}</p></div>\r\n                    <div className={`px-3 py-1 rounded-full text-sm font-semibold ${cattle.status === 'Viva' ? 'bg-emerald-100 text-emerald-800' : 'bg-red-100 text-red-800'}`}>{cattle.status}</div>\r\n                </div>\r\n                <div className=\"mt-3 pt-3 border-t\"><p className=\"text-sm text-stone-500\">Propietario: <span className=\"font-medium text-stone-700\">{owner ? owner.name : 'N/A'}</span></p></div>\r\n            </div>\r\n        );\r\n    };\r\n    const renderContent = () => {\r\n        switch (view) {\r\n            case 'byOwner':\r\n                if (!selectedOwner) {\r\n                    return (<div><button onClick={() => setView('menu')} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Selecciona un Propietario</h3><div className=\"space-y-2\">{owners.map(o => <button key={o.docId} onClick={() => setSelectedOwner(o)} className=\"w-full text-left p-4 bg-stone-100 rounded-lg hover:bg-emerald-50\">{o.name}</button>)}</div></div>);\r\n                }\r\n                const ownerCattle = cattleData.filter(c => c.ownerId === selectedOwner.docId);\r\n                return (<div><button onClick={() => setSelectedOwner(null)} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Reses de {selectedOwner.name}</h3><div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">{ownerCattle.length > 0 ? ownerCattle.map(c => <CattleCard key={c.docId} cattle={c} onClick={(cattle) => setDetailsModal({ isOpen: true, cattle })} />) : <p>Este propietario no tiene reses.</p>}</div></div>);\r\n            case 'all':\r\n                return (<div><button onClick={() => setView('menu')} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Listado de Reses Vivas</h3><div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">{cattleData.map(c => <CattleCard key={c.docId} cattle={c} onClick={(cattle) => setDetailsModal({ isOpen: true, cattle })} />)}</div></div>);\r\n            case 'deceasedSold':\r\n                return (<div><button onClick={() => setView('menu')} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Listado de Reses Vendidas o Muertas</h3><div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">{deceasedSoldData.map(c => <CattleCard key={c.docId} cattle={c} onClick={(cattle) => setDetailsModal({ isOpen: true, cattle })} />)}</div></div>);\r\n            default:\r\n                return (<div className=\"space-y-4\"><button onClick={() => setView('byOwner')} className=\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\">Consultar por Propietarios</button><button onClick={() => setView('all')} className=\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\">Listado de Reses Vivas</button><button onClick={() => setView('deceasedSold')} className=\"w-full p-6 bg-white rounded-lg shadow-md text-left text-lg font-semibold hover:bg-emerald-50\">Listado de Reses Muertas o Vendidas</button></div>);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"p-6\">\r\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg\"><h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Consultar Registros</h2>{renderContent()}</div>\r\n            {detailsModal.isOpen && detailsModal.cattle && (<Modal onClose={() => setDetailsModal({ isOpen: false })} title={`Detalles de ${detailsModal.cattle.customId}`}><div className=\"space-y-3\">{Object.entries(detailsModal.cattle).map(([key, value]) => {if (['docId', 'createdAt', 'originalDocId'].includes(key)) return null; return (<div key={key} className=\"flex justify-between\"><span className=\"font-medium text-stone-600 capitalize\">{key.replace(/([A-Z])/g, ' $1')}:</span><span className=\"text-stone-800\">{String(value)}</span></div>);})}<div className=\"flex justify-between\"><span className=\"font-medium text-stone-600\">Tipo de Ganado:</span><span className=\"text-stone-800\">{determineCattleType(detailsModal.cattle)}</span></div></div><div className=\"flex justify-end mt-6\"><button onClick={() => setDetailsModal({isOpen: false})} className=\"px-6 py-2 rounded-lg bg-emerald-600 text-white\">Cerrar</button></div></Modal>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterActivitiesScreen = ({ onCancel, activities, user }) => {\r\n    const [view, setView] = useState('menu');\r\n    const [form, setForm] = useState({ date: '', status: 'En curso', observations: '' });\r\n    const handleSave = async () => {\r\n        if (form.date && form.observations && user) {\r\n            try {\r\n                const activitiesCollectionRef = collection(db, 'users', user.uid, 'activities');\r\n                await addDoc(activitiesCollectionRef, { ...form, createdAt: new Date() });\r\n                alert('Actividad guardada con éxito!');\r\n                setForm({ date: '', status: 'En curso', observations: '' });\r\n                setView('consult');\r\n            } catch (error) { console.error(\"Error: \", error); alert(\"Hubo un error al guardar.\"); }\r\n        }\r\n    };\r\n    const sortedActivities = useMemo(() => [...activities].sort((a, b) => new Date(b.date) - new Date(a.date)), [activities]);\r\n    return (\r\n        <div className=\"p-6\"><div className=\"bg-white p-8 rounded-2xl shadow-lg\">\r\n            <h2 className=\"text-2xl font-bold text-emerald-800 mb-6\">Gestión de Actividades</h2>\r\n            {view === 'menu' ? (<div className=\"flex flex-col md:flex-row gap-4\"><button onClick={() => setView('add')} className=\"w-full p-6 bg-white rounded-lg shadow-md text-center text-lg font-semibold hover:bg-emerald-50\">Agregar Actividad</button><button onClick={() => setView('consult')} className=\"w-full p-6 bg-white rounded-lg shadow-md text-center text-lg font-semibold hover:bg-emerald-50\">Consultar Registro</button></div>)\r\n            : view === 'add' ? (<div><button onClick={() => setView('menu')} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Agregar Nueva Actividad</h3><div className=\"space-y-4\"><div><label>Fecha</label><input type=\"date\" value={form.date} onChange={e => setForm({...form, date: e.target.value})} className=\"w-full px-4 py-2 border rounded-lg\" /></div><div><label>Estado</label><select value={form.status} onChange={e => setForm({...form, status: e.target.value})} className=\"w-full px-4 py-2 border rounded-lg bg-white\"><option>En curso</option><option>Completada</option></select></div><div><label>Observaciones</label><textarea value={form.observations} onChange={e => setForm({...form, observations: e.target.value})} rows=\"4\" className=\"w-full px-4 py-2 border rounded-lg\"></textarea></div><div className=\"flex justify-end\"><button onClick={handleSave} className=\"px-6 py-3 rounded-lg bg-emerald-600 text-white font-semibold\">Guardar</button></div></div></div>)\r\n            : (<div><button onClick={() => setView('menu')} className=\"mb-4 text-emerald-600 font-semibold\">&larr; Volver</button><h3 className=\"text-xl font-bold mb-4\">Registro de Actividades</h3><div className=\"space-y-3\">{sortedActivities.map(act => (<div key={act.docId} className=\"p-4 bg-stone-50 rounded-lg border\"><div className=\"flex justify-between items-center\"><p className=\"font-semibold\">{act.date}</p><span className={`px-2 py-1 text-xs font-bold rounded-full ${act.status === 'Completada' ? 'bg-emerald-200 text-emerald-800' : 'bg-amber-200 text-amber-800'}`}>{act.status}</span></div><p className=\"mt-2 text-stone-600\">{act.observations}</p></div>))}</div></div>)\r\n            }\r\n        </div></div>\r\n    );\r\n};\r\n\r\n\r\n// --- Componente Principal de la App ---\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState('home');\r\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n    const [owners, setOwners] = useState([]);\r\n    const [cattleData, setCattleData] = useState([]);\r\n    const [deceasedSoldData, setDeceasedSoldData] = useState([]);\r\n    const [activities, setActivities] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n            setUser(currentUser); setLoading(false);\r\n            if(currentUser) { setCurrentPage('home'); }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            const collections = ['owners', 'cattle', 'deceasedSoldCattle', 'activities'];\r\n            const setters = [setOwners, setCattleData, setDeceasedSoldData, setActivities];\r\n            const unsubscribes = collections.map((col, index) => {\r\n                const q = query(collection(db, 'users', user.uid, col));\r\n                return onSnapshot(q, (querySnapshot) => {\r\n                    const data = [];\r\n                    querySnapshot.forEach((doc) => { data.push({ ...doc.data(), docId: doc.id }); });\r\n                    setters[index](data);\r\n                });\r\n            });\r\n            return () => unsubscribes.forEach(unsub => unsub());\r\n        } else {\r\n            setOwners([]); setCattleData([]); setDeceasedSoldData([]); setActivities([]);\r\n        }\r\n    }, [user]);\r\n\r\n    if (loading) { return <div className=\"flex justify-center items-center h-screen\">Cargando...</div>; }\r\n    if (!user) { return <AuthScreen />; }\r\n\r\n    const renderPage = () => {\r\n        switch (currentPage) {\r\n            case 'registerOwner': return <RegisterOwnerScreen onCancel={() => setCurrentPage('home')} owners={owners} user={user} />;\r\n            case 'registerCattle': return <RegisterCattleScreen onCancel={() => setCurrentPage('home')} owners={owners} cattleData={cattleData} user={user} />;\r\n            case 'updateCattle': return <UpdateCattleScreen onCancel={() => setCurrentPage('home')} owners={owners} user={user} />;\r\n            case 'consult': return <ConsultScreen cattleData={cattleData} owners={owners} deceasedSoldData={deceasedSoldData} />;\r\n            case 'activities': return <RegisterActivitiesScreen onCancel={() => setCurrentPage('home')} activities={activities} user={user} />;\r\n            case 'home': default: return <HomeScreen navigate={setCurrentPage} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-stone-100 min-h-screen font-sans\">\r\n            <SideMenu isOpen={isMenuOpen} onClose={() => setIsMenuOpen(false)} navigate={setCurrentPage} />\r\n            <Header title=\"Finca Moreno Z\" onMenuClick={() => setIsMenuOpen(true)} />\r\n            <main>{renderPage()}</main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}